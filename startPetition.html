<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Start a Petition</title>

  <link rel="stylesheet" href="bootstrap/bootstrap.min.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>

<body>
  <div id="header-include" data-active="start"></div>

  <main class="bg-light" style="padding-top:30px;">
    <section class="container py-4">
      <div class="d-flex flex-wrap justify-content-between align-items-end mb-3">
        <div>
          <h1 class="h4 mb-1">Start your petition</h1>
          <small class="text-muted d-block">Petition Details (Step 1/3)</small>
        </div>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent p-0 mb-0">
            <li class="breadcrumb-item"><span class="text-primary">Control Panel</span></li>
            <li class="breadcrumb-item active" aria-current="page">Start a petition</li>
          </ol>
        </nav>
      </div>

      <div class="alert alert-info small">
        Please complete the details below. You may edit and format your petition later from your Esify.speak toolbox.
        Your name can also be edited from your control panel.
      </div>

      <div class="card border-0 shadow-sm">
        <div class="card-body p-4">
          <form id="petition-form" novalidate>
            <div class="form-group">
              <label for="inputPetitionName" class="small text-muted">Petition Name</label>
              <input type="text" class="form-control form-control-lg" id="inputPetitionName"
                placeholder="e.g. Restore Library Weekend Hours" required>
              <small class="form-text text-muted">Suggest a title of 10 words or less.</small>
            </div>

            <div class="form-group">
              <label for="inputCountry" class="small text-muted">Country or Region</label>
              <select class="form-control form-control-lg" id="inputCountry" required>
                <option value="" selected disabled>Choose a country/region…</option>
              </select>
              <small class="form-text text-muted">Select a country where your petition is relevant.</small>
            </div>

            <div class="form-group">
              <label for="inputTarget" class="small text-muted">Target</label>
              <input type="text" class="form-control form-control-lg" id="inputTarget"
                placeholder="e.g. University Board of Trustees" required>
            </div>

            <div class="form-group">
              <label for="inputCategory" class="small text-muted">Category</label>
              <input type="text" class="form-control form-control-lg" id="inputCategory"
                placeholder="e.g. Education, Workplace, Community" required>
              <small class="form-text text-muted">Select a relevant category for your petition.</small>
            </div>

            <div class="form-group mb-4">
              <label for="inputPetition" class="small text-muted">Petition</label>
              <textarea id="inputPetition" rows="6" class="form-control"
                placeholder="Write the exact text you will be asking people to sign or vote for… It should include a clear request to your target."
                required></textarea>
              <small class="form-text text-muted">Include what action you want taken, and why it matters.</small>
            </div>

            <div class="d-flex justify-content-center">
              <button type="submit" class="btn btn-primary btn-lg px-5" id="nextBtn">Next</button>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>

  <div id="footer-include"></div>

  <div class="modal fade" id="wipModal" tabindex="-1" role="dialog" aria-labelledby="wipModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-body p-4">
          <h5 id="wipModalLabel" class="mb-2">Still in progress</h5>
          <p class="mb-2 text-muted">Submitting petitions isn’t live yet. We’re working on it.</p>
          <small class="text-muted d-block">Your entries here are for testing the UI only.</small>
        </div>
        <div class="modal-footer border-0 pt-0">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Okay</button>
        </div>
      </div>
    </div>
  </div>

  <script src="bootstrap/jquery-3.5.1.slim.min.js"></script>
  <script src="bootstrap/popper.min.js"></script>
  <script src="bootstrap/bootstrap.min.js"></script>
  <script src="include.js"></script>
  <script>
    (function () {
      var select = document.getElementById('inputCountry');
      var fallback = [
        "Nigeria", "Ghana", "Kenya", "South Africa", "United Kingdom", "United States", "Canada", "Germany", "France", "India"
      ];
      function fill(list) {
        if (!select) return;
        var opts = ['<option value="" disabled>Choose a country/region…</option>']
          .concat(list.sort().map(function (c) { return '<option value="' + c + '">' + c + '</option>'; }));
        select.innerHTML = opts.join('');
        select.firstElementChild.setAttribute('disabled', 'disabled');
        select.firstElementChild.setAttribute('selected', 'selected');
      }
      fetch('https://restcountries.com/v3.1/all')
        .then(function (r) { return r.json(); })
        .then(function (data) {
          var names = (data || []).map(function (c) { return (c && c.name && c.name.common) || ''; })
            .filter(Boolean);
          if (names.length) fill(names); else fill(fallback);
        })
        .catch(function () { fill(fallback); });
    })();

    (function () {
      var form = document.getElementById('petition-form');
      var nextBtn = document.getElementById('nextBtn');

      form.addEventListener('submit', function (e) {
        e.preventDefault();
        if (!form.checkValidity()) {
          form.classList.add('was-validated');
          return;
        }
        nextBtn.disabled = true;
        nextBtn.innerText = 'Please wait…';
        $('#wipModal').modal('show');
      });

      $('#wipModal').on('hidden.bs.modal', function () {
        nextBtn.disabled = false;
        nextBtn.innerText = 'Next';
      });
    })();
  </script>
</body>

</html>